<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CANDIDATE_FORM</title>
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.js" integrity="sha512-RjvSEaeDqPCfUVQ9kna2/2OqHz/7F04IOl1/66LmQjB/lOeAzwq7LrbTzDbz5cJzlPNJ5qteNtHR56XaJSTNWw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

  
</head>
<body>

  <div class="container">
      <div class="row justify-content-center mt-5">
         <div class="col-lg-6">
              <form action="Add_Candidate.html" method="post" id="myform"  >
                <h3 class="text-center mb-4">AddNew Candidate </h3>
                  <div class=" mb-3">
                    <label  class="form-label">
                        CandFirstName</label>
                      <input type="text" class="form-control" name="candFirstName" placeholder="Enter candFirstName" id="candFirstName" required>
                    
                  </div>
                  <div class="mb-3">
                    <label class="form-label" >
                        CandLastName</label>
                      <input type="text" class="form-control"  name="candLastName" placeholder="Enter candLastName" id="candLastName" required >
                    
                  </div>
                    <div class="mb-3">
                      <label class="form-label">
                        CandPosition </label>
                        <input type="text"  class="form-control" name="candPosition" placeholder="Enter candPosition" id="candPosition" required >
                     
                    </div>
                    <div class=" mb-3">
                      <label class="form-label" >
                        CandParty </label>
                        <input type="text" class="form-control" name="candParty" placeholder="Enter candParty" id="candParty" required >
                     
                    </div>
                    <!-- <div class=" mb-3">
                      <label class="form-label" >  Password</label>
                      <input type="password" class="form-control" id=" Password" placeholder="Enter Password">
                    </div>
                     -->
                     
                      <button type="submit" class="btn btn-primary">submit</button>
                     <button type="submit" class="btn btn-danger"><a href="Add_Candidate.html">Cancel</a> </button>
                  
                 

              </form>
        </div>
      </div>
  </div>
   <script>
        
      // const form =document.getElementById('form');

      // form.addEventListener('submit',function(e){
      //   e.preventDefault();
      //    const payload = new FormData(form);
      //    console.log([...payload]);

      //    fetch('http://localhost:8080/api/voter/save',{
      //     method:"POST",
      //     body:payload,
      //    })
      //    .then(res =>res.json())
      //    .then(data =>console.log(data))
      //    .catch(err => console.log(err));

      // }) 
   
    // const form = document.getElementById('form');
    // form.addEventListener('submit',(event)=>{
    //   event.preventDefault();
    //   let FirstName =document.getElementById('FirstName');
    //   let  LastName =document.getElementById(' LastName');
    //   let  Email =document.getElementById(' Email');
    //   let Address =document.getElementById('Address');
      
      // let  Password =document.getElementById(' Password');

      // axios.post('http://localhost:8080/api/voter/save',{FirstName,LastName, Email,Address})
      // .then(response =>{
      //    console.log(response.data);
      // })
      // .catch(error =>{
      //   console.error(error);
      // });

     
    // });
    // fetch('localhost:8080/api/voter/Voter')
    //   .then(response=>{
    //     console.log(response)
    //   })



      
    // fetch('https://jsonplaceholder.typicode.com/user')
    //   .then(response=>{
    //     console.log(response.data)
    //   })

//FETCH POST TO THE DATABASE
// const form = document.querySelector('#myform');
// form.addEventListener('submit', (event) => {
//   event.preventDefault();
//   let CandFirstName =document.getElementById('candFirstName');
//       let CandLastName =document.getElementById(' candLastName');
//       let  CandPosition =document.getElementById(' candPosition');
//       let CandParty =document.getElementById('candParty');

//   const formData = new FormData(form);
//   const candidate = Object.fromEntries(formData.entries());

//   fetch('http://localhost:8080/api/candidate/save', {
//     method: 'POST',
//     headers: {
//       'Content-Type': 'application/json'
//     },
//     body: JSON.stringify(candidate)
//   })
//   .then(response => response.json())
//   .then(data => {
//     console.log('User created:', data);

//     window.location.href = 'Add_Candidate.html';
  
//     // Handle success or display a success message
    
//   })
//   .catch(error => {
//     console.error('Error creating user:', error);
//     // Handle error or display an error message
//   });
// });
const form = document.querySelector('#myform');
form.addEventListener('submit', (event) => {
  event.preventDefault();
  alert("add succesfull");
  window.location.href = 'Add_Candidate.html';
  let CandFirstName = document.getElementById('candFirstName').value;
  let CandLastName = document.getElementById('candLastName').value;
  let CandPosition = document.getElementById('candPosition').value;
  let CandParty = document.getElementById('candParty').value;

  const candidate = {
    candFirstName: CandFirstName,
    candLastName: CandLastName,
    candPosition: CandPosition,
    candParty: CandParty
  };

  fetch('http://localhost:8080/api/candidate/save', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(candidate)
  })
  .then(response => response.json())
  .then(data => {
    console.log('Candidate created:', data);
    // Handle success or display a success message
    // Navigate to the Add_Candidate page

  })
  .catch(error => {
    console.error('Error creating candidate:', error);
    // Handle error or display an error message
  });
 
});




  </script>

  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
  
</body>
</html>